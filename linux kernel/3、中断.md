### 相关概念
```
// 中断一般分为异步中断(一般由硬件引起)和同步中断(一般由处理器本身引起)。

// 异步：硬件的电信号随机产生
   同步：由cpu控制单元产生，只有在一条指令终止执行后cpu才发出中断。比如：系统异常处理(比如运算中的除0操作)
        应用程序出现异常后，需要内核来处理
        内核调用相应的异常处理函数来处理异常
        处理完后终了应用程序或者给出message

// 把同步和异步又叫做异常和中断

// 中断和异常
    中断
        > 可屏蔽
            I/O设备发出的中断请求(IRQ)可被CPU忽略相应
        > 不可屏蔽
            不能用软件进行屏蔽，如硬件故障
    异常
        处理器探测异常，分为：
        故障（fault）、陷阱（trap）、异常终止（abort）、编程异常（programmed exception）

// IRQ
    每个能够发出中断请求的硬件设备都有一条IRQ的输出线
    所有现有的IRQ线都与一个名为可编程中断控制器(PIC)的硬件电路输入引脚相连
    1) 监视IRQ线，检查产生的信号。如果有两条以上的IRQ线产生信号，就是选择引脚编号较小的IRQ线
    2) 当一个IRQ线产生信号时：
        1) 把接收到的引发信号转换成对应向量
        2) 把这个向量放到PIC的一个I/O端口，从而允许cpu通过数据总线读取向量
        3) 把引发信号发送到cpu的INTR引脚，即产生一个中断
        4) 等待，直到cpu把这个信号写进PIC的一个I/O端口来确认它，才清空INTR线
        5) 到1)
    3) 可以禁止IRQ线

// 高级PIC(APIC)
    为了充分发挥SMP(对称多处理)体系结构的并行性，引入了更高级的PIC，又名APIC
    每个处理器包含一个本地APIC，所有的本地APIC都连接到一个外部的APIC。
    +--------+          +--------+
    |  cpu0  |          |  cpu1  |
    |  APIC  |          |  APIC  |      本地APIC
    +--------+          +--------+    
        |                   |
        |                   |
  ------+---------+---------+----------  中断控制器通信(ICC)总线
                  |
              +-------+      
              |  I/O  |
              |  APIC |   外部APIC          
              +-------+  
    
    相对于本地APIC，外部APIC起路由器的作用。
    静态分发：中断传给一个特定的cpu或一组cpu，或所有cpu
    动态分发：每个本地APIC都有一个优先级寄存器（TPR）。TPR计算当前运行进程的优先级。仲裁分配负荷。


// 中断描述符表(IDT)
    是一个系统表，它与每一个中断或异常向量相联系。每一个向量在表中有相应的中断或异常处理程序的入口地址
    每个向量由8字节组成。一共256*8字节存放IDT
    


```

### 中断和异常
```
(1) 中断
    > 可屏蔽
        I/O设备发出的中断请求(IRQ)可被CPU忽略相应
    > 不可屏蔽
        不能用软件进行屏蔽，如硬件故障
(2) 异常

```