### 内存寻址
1、内存地址
```
逻辑地址：          段 + 偏移量
线性地址(虚拟地址)： 16进制表示，32位范围0x00000000到0xffffffff
物理地址：          芯片级内存单元寻址，他们与从微处理器的地址引脚发送到内存总线上的电信号相对应。由32或36无符号整数表示
MMU:                内存控制单元

逻辑地址 ----------------> 虚拟地址 --------------> 物理地址
          MMU的分段单元             MMU的分页单元    
```
2、硬件中的分段
```
分段单元把逻辑地址转换成线性地址

一个逻辑地址由两部分组成：一个段标识符和一个指定段内相对地址的偏移量

(1) 段寄存器
    > 6个段寄存器
        cs、ss、ds、es、fs 和gs
    > 3个专门段寄存器，其他3个段寄存器作一般用途，可以指向任意的数据段。
        cs 代码段寄存器，指向包含程序指令的段。
        ss 栈段寄存器，指向包含当前程序栈的段。
        ds 数据段寄存器，指向包含静态数据或者全局数据段。
    > cs 寄存器还有一个很重要的功能
        它含有一个两位的字段，用以指明CPU 的当前特权级（Current Privilege Level，CPL）。值为 0 代表最高优先级，而值为 3 代表最低优先级。Linux 只用 0 级和 3 级，分别称之为内核态和用户态。
    > 每个段寄存器都有一个"可见"部分和一个"隐藏"部分。
        当一个段选择符被加载到一个段寄存器可见部分中时，处理器也同时把段选择符指向的段描述符中的段地址、段限长以及访问控制信息加载到段寄存器的隐藏部分中。缓冲在段寄存器（可见和隐藏部分）中的信息使得处理器可以在进行地址转换时不再需要花费时间从段描述符中读取基地址和限长值。

(2) 段选择符
    > 段选择符是一个16位长的字段，而偏移量是一个32位长的字段。段选择符并不直接指向段,而是指向段描述符表中定义段的段描述符。
    > 段寄存器存放的是段选择符
    > 结构
        索引号(Index)：                         15 ~ 3, 描述符表中的索引项号
        表指示标志(Table Index)：                3 ~ 2, 段描述表的索引，TI=0 GDT, TI=1 LDT
        请求特权级别(Requested Privilege Level)：2 ~ 0, 提供了段保护信息

(3) 段描述符
    由8个字节组成，描述段的特征。放在全局描述表(GDT)和局部描述表(LDT)中（通常之定义一个GDT）
    > 分类
        储存段描述符 
            数据段描述符
            代码段描述符
        系统描述符
            系统段描述符
                局部描述符表(LDT)的段描述符
                任务状态段(TSS)的描述符
            门描述符
                中断、调用、陷阱、任务
    > 内容
        9个段，含有3个主要字段：段基地址、段限长、段属性

(4) 段描述符表
    > 全局描述符表(GDT)
        全局描述符表GDT，除了任务门，中断门和陷阱门描述符外，包含着系统中所有任务都共用的那些段的描述符。 它的第一个8字节位置没有使用。
    > 中断描述符表(IDT)
        中断描述符表IDT，包含256个门描述符。IDT中只能包含任务门、中断门和陷阱门描述符，虽然IDT表最长也可以为64K字节，但只能存取2K字节以内的描述符，即256个描述符，这个数字是为了和8086保持兼容。
    > 局部描述符表(LDT)
        局部描述符表LDT，包含了与一个给定任务有关的描述符，每个任务各自有一个的LDT。 有了LDT，就可以使给定任务的代码、 数据与别的任务相隔离。
        每一个任务的局部描述符表LDT本身也用一个描述符来表示，称为LDT描述符，它包含了有关局部描述符表的信息，被放在全局描述符表GDT中。
```
3、linux分段
```
linux更喜欢分页的方式

// linux GDT
    每个cpu对应一个GDT，每个GDT包含18个段描述符




```